<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ±ÛŒÙ†Ø± Ø¨Ø§Ø²ÛŒ Ø³Øª</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/peyda-font@v1.0/dist/font-face.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.all.min.js"></script>
    <style>
               @font-face {
            font-family: 'Peyda';
            src: url('Peyda.woff2') format('woff2'),
                 url('Peyda.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        * {
            font-family: 'Peyda', sans-serif;
            transition: all 0.2s ease;
        }

        .input-effect {
            transform: translateX(0);
        }
        
        .input-effect:focus-within {
            transform: translateX(-15px);
        }

        .card-glowing {
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.1);
        }

        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='%233b82f6' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            -webkit-appearance: none;
            -moz-appearance: none;
        }

        .custom-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border-radius: 1.5rem;
            border: 2px solid rgba(59, 130, 246, 0.1);
        }

        .hover-3d {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .hover-3d:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 p-4 sm:p-6">
    <div class="container mx-auto max-w-6xl bg-white custom-card p-6 sm:p-8 shadow-2xl">
        <h1 class="text-4xl font-black mb-10 text-center bg-gradient-to-l from-blue-600 to-purple-600 bg-clip-text text-transparent">
            ğŸƒ ØªØ±ÛŒÙ†Ø± Ø¨Ø§Ø²ÛŒ Ø³Øª
        </h1>
        
        <div class="grid lg:grid-cols-2 gap-8">
            <!-- ÙØ±Ù… Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª -->
            <div class="p-6 bg-blue-50 rounded-2xl input-effect">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 border-r-4 border-blue-500 pr-3">
                    ğŸ¨ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª Ø¬Ø¯ÛŒØ¯
                </h2>
                
                <div class="space-y-6">
                    <!-- Input Groups -->
                    <div class="input-effect">
                        <label class="block mb-3 text-gray-600 font-semibold">ğŸ¨ Ø±Ù†Ú¯</label>
                        <select id="colorSelect" class="w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-0 bg-white">
                            <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯ --</option>
                            <option value="Ø³Ø¨Ø²">ğŸŸ¢ Ø³Ø¨Ø²</option>
                            <option value="Ø¢Ø¨ÛŒ">ğŸ”µ Ø¢Ø¨ÛŒ</option>
                            <option value="Ù‚Ø±Ù…Ø²">ğŸ”´ Ù‚Ø±Ù…Ø²</option>
                        </select>
                    </div>

                    <div class="input-effect">
                        <label class="block mb-3 text-gray-600 font-semibold">ğŸ”¶ Ø´Ú©Ù„</label>
                        <select id="shapeSelect" class="w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-0 bg-white">
                            <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ú©Ù„ --</option>
                            <option value="Ù…Ø«Ù„Ø«">ğŸ”º Ù…Ø«Ù„Ø«</option>
                            <option value="Ù…Ø±Ø¨Ø¹">â—¼ï¸ Ù…Ø±Ø¨Ø¹</option>
                            <option value="Ø¯Ø§ÛŒØ±Ù‡">â­• Ø¯Ø§ÛŒØ±Ù‡</option>
                        </select>
                    </div>

                    <div class="input-effect">
                        <label class="block mb-3 text-gray-600 font-semibold">ğŸ”¢ ØªØ¹Ø¯Ø§Ø¯</label>
                        <select id="countSelect" class="w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-0 bg-white">
                            <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ ØªØ¹Ø¯Ø§Ø¯ --</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </div>

                    <div class="input-effect">
                        <label class="block mb-3 text-gray-600 font-semibold">ğŸ–Œï¸ Ù†ÙˆØ¹ Ø±Ù†Ú¯</label>
                        <select id="fillSelect" class="w-full p-3 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-0 bg-white">
                            <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ --</option>
                            <option value="ØªÙˆØ®Ø§Ù„ÛŒ">â—»ï¸ ØªÙˆØ®Ø§Ù„ÛŒ</option>
                            <option value="Ù‡Ø§Ø´ÙˆØ±">â—‘ Ù‡Ø§Ø´ÙˆØ±</option>
                            <option value="Ú©Ø§Ù…Ù„">â—¼ï¸ Ú©Ø§Ù…Ù„</option>
                        </select>
                    </div>

                    <button id="addCardBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl 
                    transform transition-all hover:scale-[1.02] active:scale-95 shadow-lg">
                        â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Øª
                    </button>
                </div>
            </div>

            <!-- Ù¾ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ -->
            <div class="space-y-8">
                <div class="bg-white p-6 rounded-2xl shadow-lg card-glowing">
                    <h2 class="text-2xl font-bold mb-6 text-gray-800 border-r-4 border-purple-500 pr-3">
                        ğŸ” Ù¾ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡
                    </h2>
                    <div class="bg-gray-50 p-4 rounded-xl">
                        <svg id="cardPreview" width="100%" height="220" class="mx-auto transition-all"></svg>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <button id="checkSetBtn" class="bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-xl 
                    font-bold transform transition-all hover:scale-[1.02] shadow-lg">
                        ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ø³Øª
                    </button>
                    <button id="resetBtn" class="bg-red-600 hover:bg-red-700 text-white p-4 rounded-xl 
                    font-bold transform transition-all hover:scale-[1.02] shadow-lg">
                        ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
                    </button>
                </div>
            </div>
        </div>

        <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ -->
        <div class="mt-12">
            <h2 class="text-2xl font-bold mb-8 text-gray-800 border-r-4 border-green-500 pr-3">
                ğŸƒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§
            </h2>
            <div id="cardContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
        </div>
    </div>

    <script>
        // Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
        const colorSelect = document.getElementById('colorSelect');
        const shapeSelect = document.getElementById('shapeSelect');
        const countSelect = document.getElementById('countSelect');
        const fillSelect = document.getElementById('fillSelect');
        const addCardBtn = document.getElementById('addCardBtn');
        const cardPreview = document.getElementById('cardPreview');
        const cardContainer = document.getElementById('cardContainer');
        const checkSetBtn = document.getElementById('checkSetBtn');
        const resetBtn = document.getElementById('resetBtn');

        let cards = [];

        // ØªØ§Ø¨Ø¹ Ø±Ø³Ù… SVG
        function drawCardSVG(card, size = 200) {
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', size);
            svg.setAttribute('height', size);
            svg.setAttribute('viewBox', '0 0 200 200');

            const colors = {
                'Ø³Ø¨Ø²': '#10b981',
                'Ø¢Ø¨ÛŒ': '#3b82f6',
                'Ù‚Ø±Ù…Ø²': '#ef4444'
            };

            const colorCode = colors[card.Ø±Ù†Ú¯] || '#000';
            const shapePaths = {
                'Ù…Ø«Ù„Ø«': 'M100 50 L50 150 L150 150 Z',
                'Ù…Ø±Ø¨Ø¹': 'M50 50 L150 50 L150 150 L50 150 Z',
                'Ø¯Ø§ÛŒØ±Ù‡': 'M100 100 A50 50 0 1 0 100 99.9'
            };

            // Ø§ÛŒØ¬Ø§Ø¯ Ø§Ù„Ú¯ÙˆÛŒ Ù‡Ø§Ø´ÙˆØ±
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            const pattern = document.createElementNS('http://www.w3.org/2000/svg', 'pattern');
            pattern.setAttribute('id', 'hatchPattern');
            pattern.setAttribute('patternUnits', 'userSpaceOnUse');
            pattern.setAttribute('width', '10');
            pattern.setAttribute('height', '10');
            
            const hatchPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hatchPath.setAttribute('d', 'M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2');
            hatchPath.setAttribute('stroke', colorCode);
            hatchPath.setAttribute('stroke-width', '2');
            
            pattern.appendChild(hatchPath);
            defs.appendChild(pattern);
            svg.appendChild(defs);

            // Ø±Ø³Ù… Ø§Ø´Ú©Ø§Ù„
            for (let i = 0; i < card.ØªØ¹Ø¯Ø§Ø¯; i++) {
                const shape = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                shape.setAttribute('d', shapePaths[card.Ø´Ú©Ù„]);
                shape.setAttribute('transform', `translate(0, ${i * 50})`);
                shape.setAttribute('stroke', colorCode);
                shape.setAttribute('stroke-width', '3');
                
                if (card.Ù†ÙˆØ¹_Ø±Ù†Ú¯ === 'ØªÙˆØ®Ø§Ù„ÛŒ') {
                    shape.setAttribute('fill', 'none');
                } else if (card.Ù†ÙˆØ¹_Ø±Ù†Ú¯ === 'Ù‡Ø§Ø´ÙˆØ±') {
                    shape.setAttribute('fill', 'url(#hatchPattern)');
                } else {
                    shape.setAttribute('fill', colorCode);
                }

                svg.appendChild(shape);
            }

            return svg;
        }

        // Ø¢Ù¾Ø¯ÛŒØª Ù¾ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡
        function updateLivePreview() {
            const previewCard = {
                Ø±Ù†Ú¯: colorSelect.value,
                Ø´Ú©Ù„: shapeSelect.value,
                ØªØ¹Ø¯Ø§Ø¯: countSelect.value,
                Ù†ÙˆØ¹_Ø±Ù†Ú¯: fillSelect.value
            };

            cardPreview.innerHTML = '';
            if (Object.values(previewCard).every(val => val)) {
                cardPreview.appendChild(drawCardSVG(previewCard, 200));
            }
        }

        // Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Øª Ø¬Ø¯ÛŒØ¯
        addCardBtn.addEventListener('click', () => {
            const card = {
                Ø±Ù†Ú¯: colorSelect.value,
                Ø´Ú©Ù„: shapeSelect.value,
                ØªØ¹Ø¯Ø§Ø¯: parseInt(countSelect.value),
                Ù†ÙˆØ¹_Ø±Ù†Ú¯: fillSelect.value
            };

            if (Object.values(card).every(val => val)) {
                cards.push(card);
                updateCardDisplay();
                resetForm();
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Ø®Ø·Ø§',
                    text: 'Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯!',
                    confirmButtonColor: '#3b82f6'
                });
            }
        });

        // Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
        function updateCardDisplay() {
            cardContainer.innerHTML = '';
            
            cards.forEach((card, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'bg-white hover-3d p-4 rounded-2xl shadow-lg';
                
                const svg = drawCardSVG(card, 180);
                const infoDiv = document.createElement('div');
                infoDiv.className = 'mt-4 text-gray-700';
                infoDiv.innerHTML = `
                    <p class="font-bold text-lg">Ú©Ø§Ø±Øª ${index + 1}</p>
                    <p class="text-sm">Ø±Ù†Ú¯: ${card.Ø±Ù†Ú¯}</p>
                    <p class="text-sm">Ø´Ú©Ù„: ${card.Ø´Ú©Ù„}</p>
                    <p class="text-sm">ØªØ¹Ø¯Ø§Ø¯: ${card.ØªØ¹Ø¯Ø§Ø¯}</p>
                    <p class="text-sm">Ù†ÙˆØ¹ Ø±Ù†Ú¯: ${card.Ù†ÙˆØ¹_Ø±Ù†Ú¯}</p>
                `;
                
                cardDiv.appendChild(svg);
                cardDiv.appendChild(infoDiv);
                cardContainer.appendChild(cardDiv);
            });
        }

        // Ø±ÛŒØ³Øª ÙØ±Ù…
        function resetForm() {
            colorSelect.value = '';
            shapeSelect.value = '';
            countSelect.value = '';
            fillSelect.value = '';
            updateLivePreview();
        }

        // Ø¨Ø±Ø±Ø³ÛŒ Ø³Øª
        checkSetBtn.addEventListener('click', () => {
            if (cards.length < 3) {
                Swal.fire({
                    icon: 'warning',
                    title: 'ØªÙˆØ¬Ù‡',
                    text: 'Ø­Ø¯Ø§Ù‚Ù„ Û³ Ú©Ø§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†ÛŒØ§Ø² Ø§Ø³Øª',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }

            const validSets = findValidSets(cards);

            if (validSets.length > 0) {
                Swal.fire({
                    title: 'ğŸ‰ Ø³Øª Ù…Ø¹ØªØ¨Ø± ÛŒØ§ÙØª Ø´Ø¯!',
                    html: validSets.map(set => 
                        `<div class="p-2 bg-blue-50 rounded-lg mb-2">Ø³Øª ${set.join(' - ')}</div>`
                    ).join(''),
                    confirmButtonColor: '#3b82f6',
                    background: '#f8fafc'
                });
            } else {
                Swal.fire({
                    icon: 'info',
                    title: 'ÛŒØ§ÙØª Ù†Ø´Ø¯',
                    text: 'Ù‡ÛŒÚ† Ø³Øª Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯',
                    confirmButtonColor: '#3b82f6'
                });
            }
        });

        // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±
        function findValidSets(cards) {
            const validSets = [];
            for (let i = 0; i < cards.length - 2; i++) {
                for (let j = i + 1; j < cards.length - 1; j++) {
                    for (let k = j + 1; k < cards.length; k++) {
                        if (isValidSet(cards[i], cards[j], cards[k])) {
                            validSets.push([i+1, j+1, k+1]);
                        }
                    }
                }
            }
            return validSets;
        }

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³Øª
        function isValidSet(c1, c2, c3) {
            const props = ['Ø±Ù†Ú¯', 'Ø´Ú©Ù„', 'ØªØ¹Ø¯Ø§Ø¯', 'Ù†ÙˆØ¹_Ø±Ù†Ú¯'];
            return props.every(prop => {
                const values = [c1[prop], c2[prop], c3[prop]];
                return new Set(values).size !== 2;
            });
        }

        // Ø±ÛŒØ³Øª Ú©Ø§Ù…Ù„
        resetBtn.addEventListener('click', () => {
            Swal.fire({
                title: 'Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒØ¯ØŸ',
                text: 'Ù‡Ù…Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3b82f6',
                cancelButtonColor: '#ef4444',
                confirmButtonText: 'Ø¨Ù„Ù‡ØŒ Ù¾Ø§Ú© Ú©Ù†',
                cancelButtonText: 'Ù„ØºÙˆ'
            }).then((result) => {
                if (result.isConfirmed) {
                    cards = [];
                    cardContainer.innerHTML = '';
                    Swal.fire({
                        title: 'Ù¾Ø§Ú© Ø´Ø¯!',
                        text: 'Ù‡Ù…Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯',
                        icon: 'success',
                        confirmButtonColor: '#3b82f6'
                    });
                }
            });
        });

        // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡
        [colorSelect, shapeSelect, countSelect, fillSelect].forEach(el => {
            el.addEventListener('change', updateLivePreview);
        });
    </script>
</body>
</html>